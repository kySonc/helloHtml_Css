<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="height7.css" />
    <title>grid-images</title>
  </head>
  <body>
      <h1>이미지의 가로세로비를 유지하면서 틀 안에 맞추기</h1>

      <h2>세로로 긴 이미지 맞추기</h2>
      <ul class="clearfix">
        <li>
          <p>1:1 비율</p>
          <div class="aspect_1_1"><img src="../Introduce/images/p1237.png.png"></div>
        </li>
        <li>
          <p>4:3 비율</p>
          <div class="aspect_4_3"><img src="../Introduce/images/p1237.png.png"></div>
        </li>
        <li>
          <p>4:5 비율</p>
          <div class="aspect_4_5"><img src="../Introduce/images/p1237.png.png"></div>
        </li>
        <li>
          <button id="btnToggleOverflow" type="button">이미지 자름 토글</button>
        </li>
      </ul>

      <br><br>
      <h2>가로로 긴 이미지 맞추기</h2>
      <ul class="clearfix">
        <li>
          <p>1:1 비율</p>
          <div class="aspect_1_1"><img src="../Introduce/images/p1236.png.png"></div>
        </li>
        <li>
          <p>4:3 비율</p>
          <div class="aspect_4_3"><img src="../Introduce/images/p1236.png.png"></div>
        </li>
        <li>
          <p>4:5 비율</p>
          <div class="aspect_4_5"><img src="../Introduce/images/p1236.png.png"></div>
        </li>
      </ul>
     <div class="footer">
       <script>
         window.onload = function() {
          var divs = document.querySelectorAll('li > div');
          for (var i = 0; i < divs.length; ++i) {
            var div = divs[i];
            var divAspect = div.offsetHeight / div.offsetWidth;
            div.style.overflow = 'hidden';
            
            var img = div.querySelector('img');
            var imgAspect = img.height / img.width;

            if (imgAspect <= divAspect) {
              // 이미지가 div보다 납작한 경우 세로를 div에 맞추고 가로는 잘라낸다
              var imgWidthActual = div.offsetHeight / imgAspect;
              var imgWidthToBe = div.offsetHeight / divAspect;
              var marginLeft = -Math.round((imgWidthActual - imgWidthToBe) / 2)
              /*img.style.cssText = 'width: auto; height: 100%; margin-left: '
                              + marginLeft + 'px;'*/
              img.style.cssText = 'width: auto; height: 100%;'
                              + marginLeft + 'px;'
            } else {
              // 이미지가 div보다 길쭉한 경우 가로를 div에 맞추고 세로를 잘라낸다
              /*img.style.cssText = 'width: 100%; height: auto; margin-left: 0;';*/
              // 이미지가 div보다 길쭉한 경우 가로를 div에 맞추고 세로를 잘라낸다
              img.style.cssText = 'width: 100%; height: auto;';
            }
          }
          
          var btn = document.querySelector('#btnToggleOverflow');
          btn.onclick = function() {
            var val = divs[0].style.overflow == 'hidden' ? 'visible' : 'hidden';
            for (var i = 0; i < divs.length; ++i)
              divs[i].style.overflow = val;
          };
        };
       </script>
  </body>
</html>
